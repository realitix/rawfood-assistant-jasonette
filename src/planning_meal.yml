$jason:
    head:
        title: Recettes
        templates:
            header:
                title: Repas
                style: !include styles/body_header.yml
            body:
                style: !include styles/body.yml
                header:
                    title: Repas
                footer:
                    tabs: !include footer_tabs.yml
                sections:
                    - header:
                        type: label
                        text: "Repas du {{$jason.datetime}}"
                    - header:
                        type: button
                        text: Ajouter un aliment
                        href:
                            url: file://out/generic_add_ingredient.json
                            options:
                                obj_key: meal
                                obj_value: "{{$jason.url}}"
                                post_url: ROOT_URL/meal-aliments/
                    - header:
                        type: button
                        text: Ajouter une recette
                        href:
                            url: file://out/generic_add_receipe.json
                            options:
                                obj_key: meal
                                obj_value: "{{$jason.url}}"
                                post_url: ROOT_URL/meal-receipes/
                    - header:
                        type: label
                        text: Liste des aliments
                      items:
                        "{{#each $jason.aliments}}":
                            type: label
                            text: "{{aliment_detail.name}} / {{quantity}}g"
                    - header:
                        type: label
                        text: Liste des recettes
                      items:
                        "{{#each $jason.receipes}}":
                            type: label
                            text: "{{receipe_detail.name}}"

        actions:
            $load:
                trigger: refresh_view
            $show:
                trigger: refresh_view
            refresh_view:
                type: $network.request
                options:
                    url: "{{$params.meal_url}}"
                success:
                    type: $render